(function(t){function i(i){for(var o,r,a=i[0],h=i[1],u=i[2],c=0,p=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(o in h)Object.prototype.hasOwnProperty.call(h,o)&&(t[o]=h[o]);l&&l(i);while(p.length)p.shift()();return n.push.apply(n,u||[]),e()}function e(){for(var t,i=0;i<n.length;i++){for(var e=n[i],o=!0,a=1;a<e.length;a++){var h=e[a];0!==s[h]&&(o=!1)}o&&(n.splice(i--,1),t=r(r.s=e[0]))}return t}var o={},s={app:0},n=[];function r(i){if(o[i])return o[i].exports;var e=o[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=o,r.d=function(t,i,e){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)r.d(e,o,function(i){return t[i]}.bind(null,o));return e},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],h=a.push.bind(a);a.push=i,a=a.slice();for(var u=0;u<a.length;u++)i(a[u]);var l=h;n.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("56d7")},"034f":function(t,i,e){"use strict";e("85ec")},"56d7":function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("2b0e"),s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("Fan")],1)},n=[],r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"webgl"}},[e("div",{staticClass:"nav"},[e("ul",[e("li",{on:{click:function(i){return t.cEvent(1)}}},[t._v("Stop")]),e("li",{on:{click:function(i){return t.cEvent(2)}}},[t._v("Normal")]),e("li",{on:{click:function(i){return t.cEvent(3)}}},[t._v("Ota")])])]),e("canvas",{ref:"canvas",attrs:{id:"webgl_canvas"}}),e("img",{staticStyle:{display:"none"},attrs:{id:"ota-img",src:"img/otaku_otagei.png"}})])},a=[],h=e("d4ec"),u=e("bee2"),l=e("5a89"),c=function(){function t(){Object(h["a"])(this,t),this.scene=null,this.camera=null,this.spotLight=null,this.renderer=null,this.size={windowW:null,windowH:null},this.clock=null,this.time={total:null,delta:null},this.stats=null}return Object(u["a"])(t,[{key:"init",value:function(t){this.setSize(),this.scene=new l["h"],this.camera=new l["f"](45,this.size.windowW/this.size.windowH,.1,1e3),this.camera.position.set(0,5,-400),this.camera.lookAt(this.scene.position),this.renderer=new l["l"]({canvas:t}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0),this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.size.windowW,this.size.windowH),this.clock=new l["b"],this.clock.start()}},{key:"setSize",value:function(){this.size={windowW:window.innerWidth,windowH:window.innerHeight}}},{key:"resize",value:function(){this.setSize(),this.camera.aspect=this.size.windowW/this.size.windowH,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.size.windowW,this.size.windowH)}},{key:"render",value:function(){this.time.delta=this.clock.getDelta(),this.time.total+=this.time.delta,this.renderer.render(this.scene,this.camera)}}]),t}(),p=new c,d="attribute vec4 color;\r\nvarying vec4 vColor;\r\nvarying vec3 pos;\r\n\r\nuniform vec4 ota;\r\nvarying vec4 o;\r\n\r\nuniform float time;\r\nvarying float t;\r\n\r\nvoid main() {\r\n  // vColor = otaColor1 * radius1.r + otaColor2 * radius1.g + otaColor3 * radius1.b + otaColor4 * radius1.a + otaColor1 * radius2.a;\r\n  vColor = vec4(color.r, color.g, color.b, color.a);\r\n  o = ota;\r\n  t = time;\r\n  pos = vec3(position.x * clamp(tan(sin(t * 0.1) * 5.0), -5.0, 5.0), position.y * cos(t * 0.3), abs(position.y * 0.05));\r\n  // pos = vec3(position.x * tan(sin(t * 0.1) * 5.0), position.y * cos(t * 0.3), abs(position.y * 0.05));\r\n  // pos = vec3(position.x * sin(tan(t * 0.1) * 5.0), position.y * cos(t * 0.3), abs(position.y * 0.05));\r\n  gl_PointSize = 3.0; // 2.5 3.3\r\n  // gl_Position = projectionMatrix * modelViewMatrix * vec4(pos.x, pos.y, pos.z, 1.0);\r\n  vec4 finalPos = vec4(position, 1.0) * ota.x + vec4(pos, 1.0) * ota.y;\r\n  gl_Position = projectionMatrix * modelViewMatrix * finalPos;\r\n}",m="precision mediump float;\r\nvarying vec4 vColor;\r\nvarying vec3 pos;\r\nvarying float t;\r\nuniform float radius1;\r\nvarying vec4 o;\r\n\r\nvoid main() {\r\n  float sTime = sin(pos.y * 0.1 + radius1 + t);\r\n  float cTime = cos(pos.y * 0.2 + t);\r\n  float tTime = tan(pos.z * 0.2 + t);\r\n  vec4 finalColor = vColor * o.x + vColor * vec4(sTime, tTime, cTime, 1.0) * o.y;\r\n  gl_FragColor = finalColor;\r\n}",f=function(){function t(){Object(h["a"])(this,t),this.url="/img/holo.jpg",this.positions=[],this.colors=[],this.texture=null,this.imgCtx=null,this.imgWidth=150,this.imgHeight=117,this.imgData=null,this.uniforms=null,this.loadOK=!1,this.color1=[],this.color2=[],this.color3=[],this.color4=[],this.color5=[]}return Object(u["a"])(t,[{key:"init",value:function(){var t=document.createElement("canvas");t.width=this.imgWidth,t.height=this.imgHeight,this.imgCtx=t.getContext("2d"),this.imgCtx.drawImage(this.texture,0,0),this.imgData=this.imgCtx.getImageData(0,0,this.imgWidth,this.imgHeight).data;for(var i=0;i<this.imgHeight;i++)for(var e=0;e<this.imgWidth;e++){var o=4*(i*this.imgWidth+e),s=4*(i*this.imgWidth+e)+1,n=4*(i*this.imgWidth+e)+2,r=4*(i*this.imgWidth+e)+3;this.colors.push(this.imgData[o]),this.colors.push(this.imgData[s]),this.colors.push(this.imgData[n]),this.colors.push(this.imgData[r]);var a=e-this.imgWidth/2,h=-i+this.imgHeight/2,u=0;this.positions.push(a),this.positions.push(h),this.positions.push(u)}}},{key:"loadTexture",value:function(){this.texture=document.getElementById("ota-img"),this.loadOK=!0,this.init()}},{key:"setMesh",value:function(){this.geometry=new l["a"],this.positionAttrib=new l["d"](this.positions,3),this.colorAttrib=new l["j"](this.colors,4),this.colorAttrib.normalized=!0,this.geometry.setAttribute("position",this.positionAttrib),this.geometry.setAttribute("color",this.colorAttrib),this.uniforms={time:{value:p.time.total}},this.material=new l["i"]({uniforms:this.uniforms,vertexShader:d,fragmentShader:m,side:l["c"]}),this.mesh=new l["g"](this.geometry,this.material),p.scene.add(this.mesh)}},{key:"update",value:function(){this.uniforms.time.value=.001*p.clock.oldTime}}]),t}(),g=e("cffa"),v=function(){function t(){Object(h["a"])(this,t),this.geometry=null,this.material=null,this.positions=[],this.colors=[],this.otaPosi=[],this.otaCol=[],this.sizeX=30,this.sizeY=117,this.parentGroup=new l["e"],this.group1=new l["e"],this.group2=new l["e"],this.group3=new l["e"],this.uniforms=null,this.check=1,this.type=null,this.radius=new l["k"](0,0,0,0),this.updateOk=!1,this.count=0}return Object(u["a"])(t,[{key:"init",value:function(){this.setData(),this.ota=new f,this.ota.loadTexture(),this.otaPosi=this.ota.positions,this.otaCol=this.ota.colors,this.setMeshObj()}},{key:"setData",value:function(){this.size=this.sizeX*this.sizeY;for(var t=0;t<this.size;t++){var i=t%this.sizeX-this.sizeX/2,e=Math.floor(t/this.sizeX)-this.sizeY/2,o=0;this.positions.push(i),this.positions.push(e),this.positions.push(o),this.colors.push(255*Math.random()),this.colors.push(255*Math.random()),this.colors.push(255*Math.random()),this.colors.push(255)}}},{key:"update",value:function(){switch(this.check){case 1:this.group1.rotation.z+=Math.PI/150,this.group2.rotation.z+=Math.PI/150,this.group3.rotation.z+=Math.PI/150;break;case 2:this.group1.rotation.z+=Math.PI/12,this.group2.rotation.z+=Math.PI/12,this.group3.rotation.z+=Math.PI/12,this.parentGroup.rotation.y=Math.sin(p.clock.oldTime/1e3)*Math.PI/3;break;case 3:this.group1.rotation.z+=Math.PI/10,this.group2.rotation.z+=Math.PI/12,this.group3.rotation.z+=Math.PI/14,this.parentGroup.rotation.y=Math.sin(p.clock.oldTime/1e3)*Math.PI/3;break;default:break}this.uniforms.time.value=p.time.total,this.uniforms.time.value=.001*p.clock.oldTime,this.uniforms.radius1.value=this.group1.rotation.z%Math.PI,this.updateColor()}},{key:"clickEvent",value:function(t){this.check=t,1===this.check&&(g["a"].to(this.parentGroup.rotation,{y:0,duration:.5,ease:"Power3.easeInOut"}),this.group1.rotation.z=0,this.group2.rotation.z=2*Math.PI/3*1,this.group3.rotation.z=2*Math.PI/3*2,this.uniforms.ota.value=new l["k"](1,0,0,0)),2===this.check&&(this.group1.rotation.z=0,this.group2.rotation.z=2*Math.PI/3*1,this.group3.rotation.z=2*Math.PI/3*2,this.uniforms.ota.value=new l["k"](1,0,0,0)),3===this.check&&(this.uniforms.ota.value=new l["k"](0,1,0,0))}},{key:"setMeshObj",value:function(){this.geometry=new l["a"],this.posAttrib=new l["d"](this.positions,3),this.colAttrib=new l["j"](this.colors,4),this.colAttrib.normalized=!0,this.geometry.setAttribute("position",this.posAttrib),this.geometry.setAttribute("color",this.colAttrib),this.uniforms={time:{value:p.time.total},ota:{value:new l["k"](1,0,0,0)},radius1:{value:0}},this.material=new l["i"]({uniforms:this.uniforms,vertexShader:d,fragmentShader:m,side:l["c"]});for(var t=0;t<3;t++)switch(this.points=new l["g"](this.geometry,this.material),this.points.position.set(0,55,-50),t){case 0:this.group1.add(this.points);break;case 1:this.group2.add(this.points),this.group2.rotation.z=2*Math.PI/3*1;break;case 2:this.group3.add(this.points),this.group3.rotation.z=2*Math.PI/3*2;break;default:break}this.parentGroup.add(this.group1),this.parentGroup.add(this.group2),this.parentGroup.add(this.group3),p.scene.add(this.parentGroup)}},{key:"updateColor",value:function(){for(var t=this.group1.children[0].geometry.attributes.color.array,i=this.group1.rotation.z,e=i%(2*Math.PI),o=Math.ceil(e/(2*Math.PI)*this.ota.imgWidth),s=0;s<this.sizeY;s++)for(var n=0;n<this.sizeX;n++){var r=4*(s*this.ota.imgWidth+o+n);t[s*(4*this.sizeX)+4*n]=this.ota.imgData[r+0],t[s*(4*this.sizeX)+4*n+1]=this.ota.imgData[r+1],t[s*(4*this.sizeX)+4*n+2]=this.ota.imgData[r+2],t[s*(4*this.sizeX)+4*n+3]=this.ota.imgData[r+3]}this.group1.children[0].geometry.attributes.color.needsUpdate=!0}}]),t}(),w=e("ef20"),y=function(){function t(){Object(h["a"])(this,t),this.stats=null}return Object(u["a"])(t,[{key:"init",value:function(){this.stats=new w["a"],document.body.appendChild(this.stats.dom)}},{key:"updateBegin",value:function(){this.stats.begin()}},{key:"updateEnd",value:function(){this.stats.end()}}]),t}(),b=function(){function t(i){Object(h["a"])(this,t),this.props=i,this.stats=new y,this.init()}return Object(u["a"])(t,[{key:"init",value:function(){var t=this,i=document.getElementById("ota-img");i.originSrc=i.src,i.src="",i.addEventListener("load",(function(){p.init(t.props.$canvas),t.propeller=new v,t.propeller.init(),window.addEventListener("resize",t.resize.bind(t)),t.stats.init(),t.loop()})),i.src=i.originSrc}},{key:"resize",value:function(){p.resize()}},{key:"loop",value:function(){this.stats.updateBegin(),this.render(),this.stats.updateEnd(),requestAnimationFrame(this.loop.bind(this))}},{key:"render",value:function(){p.render(),this.propeller.update()}},{key:"clickEvent",value:function(t){this.propeller.clickEvent(t)}}]),t}(),k={data:function(){return{}},mounted:function(){this.MyGL||(this.MyGL=new b({$canvas:this.$refs.canvas}))},methods:{cEvent:function(t){this.MyGL.clickEvent(t)}}},z=k,M=(e("bbff"),e("2877")),P=Object(M["a"])(z,r,a,!1,null,"25c63253",null),x=P.exports,O={name:"App",components:{Fan:x}},j=O,C=(e("034f"),Object(M["a"])(j,s,n,!1,null,null,null)),I=C.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(I)}}).$mount("#app")},"85ec":function(t,i,e){},"92c9":function(t,i,e){},bbff:function(t,i,e){"use strict";e("92c9")}});
//# sourceMappingURL=app.356dd4d0.js.map